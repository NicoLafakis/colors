Based on the GitHub documentation, here's the rewritten instruction file formatted for `.github/copilot-instructions.md`:

---

# Project Overview

This is a Coolors-style color palette generator web application. The app allows users to generate harmonious color palettes with 2-10 colors displayed as full-height columns across the screen. Users can lock colors, generate new palettes via spacebar, extract colors from images, adjust palette properties, and export in multiple formats. The primary user experience is fast and keyboard-driven.

## Tech Stack

- **Frontend Framework**: React 18+ with TypeScript
- **Styling**: Tailwind CSS (JIT mode with purge enabled)
- **Build Tool**: Vite
- **Color Manipulation**: Chroma.js (13.5KB, zero dependencies) OR TinyColor2 (5KB)
- **Image Processing**: HTML5 Canvas API, Color Thief library for extraction
- **Drag & Drop**: @dnd-kit/core or react-beautiful-dnd
- **State Management**: React useState or Zustand (keep simple)

## Folder Structure

```
src/
├── components/
│   ├── ColorColumn.tsx          # Individual color column component
│   ├── ColorInspector.tsx       # Color editing panel
│   ├── ImagePicker.tsx          # Image upload/color extraction
│   ├── ExportModal.tsx          # Export functionality
│   ├── PaletteControls.tsx     # Sliders and controls
│   └── GradientPreview.tsx      # Gradient visualization
├── hooks/
│   ├── useKeyboardShortcuts.ts  # Keyboard navigation
│   ├── useColorGeneration.ts    # Color harmony algorithms
│   └── useColorExtraction.ts    # Image processing
├── utils/
│   ├── colorHarmony.ts          # Complementary, triadic, analogous, etc.
│   ├── colorQuantization.ts     # MMCQ or k-means for image extraction
│   ├── colorConversion.ts       # HEX/RGB/HSL/HSV/CMYK conversions
│   └── exportUtils.ts           # PNG, CSS, JSON export functions
├── types/
│   └── palette.types.ts         # TypeScript interfaces
└── App.tsx
```

## Core Data Types

Always use this ColorColumn interface:

```typescript
interface ColorColumn {
  id: string;
  hex: string;
  locked: boolean;
  name?: string;
}
```

## Color Generation Standards

**Always generate colors in HSL color space** for better harmony, then convert to HEX for display. RGB generation produces muddy colors.

**Always use these harmony modes**:
- Complementary: 180° apart on color wheel
- Analogous: 30° apart (adjacent colors)
- Triadic: 120° apart (equilateral triangle)
- Split-Complementary: Base + 2 adjacent to complement
- Monochromatic: Vary lightness/saturation only

**Always constrain generated colors**:
- Saturation: 40-90% (0.4-0.9)
- Lightness: 30-80% (0.3-0.8)
- These ranges prevent washed-out or too-dark colors

**When locked colors exist**: New colors must harmonize with locked ones by analyzing their hue/saturation/lightness and applying color theory rules.

**For gradients**: Always use LAB or LCH color space for interpolation, never RGB (RGB creates muddy middle colors). Use Chroma.js: `chroma.scale([color1, color2]).mode('lab').colors(10)`

## Keyboard Shortcuts

Always implement these shortcuts (critical for UX):
- `Space`: Generate new palette
- `L`: Lock/unlock focused column
- `C`: Copy HEX to clipboard
- `E`: Export palette
- `O`: Open image picker
- `←/→`: Navigate between columns
- `Shift + ←/→`: Shift hue
- `↑/↓`: Adjust brightness

## Image Color Extraction

Use Canvas API with MMCQ (Modified Median Cut Quantization) algorithm. Color Thief library implements this:

```typescript
import ColorThief from 'colorthief';
const colorThief = new ColorThief();
const palette = colorThief.getPalette(imgElement, 5);
```

Always handle CORS for external images. Always resize images >2MB before processing to prevent canvas overload.

## Performance Requirements

- Color generation must complete in **<50ms** for smooth spacebar interaction
- Debounce slider adjustments to **150ms**
- Use `React.memo()` on ColorColumn components to prevent unnecessary re-renders
- Code split heavy features (image processing, export modals)
- Lazy load the color picker component

## Component Standards

**ColorColumn Component**:
- Always fill 100% viewport height
- Always display HEX code prominently
- Always show lock icon, remove button, and adjustment tools on hover
- Always make columns draggable for reordering

**Color Inspector**:
- Support input in HEX, RGB, HSL, HSV, CMYK formats
- Always validate input and convert between formats
- Use native `<input type="color">` or custom color picker

**Export Formats**:
Always support these formats:
- CSS variables: `:root { --color-1: #hex; }`
- SCSS: `$color-1: #hex;`
- JSON: Array of hex values
- PNG: Visual palette image
- URL: Encode colors in URL for sharing

## UI/UX Standards

**Visual Polish**:
- Use 150-200ms CSS transitions for smooth color changes
- Always provide keyboard focus indicators
- Always show toast notifications for copy/save actions
- Always display loading states during image processing

**Responsive Design**:
- Desktop: Full-width equal columns
- Tablet: Horizontal scroll if >6 columns
- Mobile: Vertical stack with 44x44px minimum touch targets

## Code Style

- Always use TypeScript strict mode
- Always use functional components with hooks
- Always use arrow functions for callbacks
- Use semicolons at end of statements
- Use single quotes for strings
- Minify code where possible for production efficiency

## Color Manipulation Library Usage

If using **Chroma.js**:
```typescript
chroma('#ff0000').darken().saturate(2).hex()
```

If using **TinyColor2** (includes built-in harmony functions):
```typescript
tinycolor('#ff0000').analogous() // Returns array of analogous colors
tinycolor('#ff0000').complement() // Returns complement
```

## Color Blindness Simulation

Apply transformation matrices for accessibility testing:
- Protanopia (red-blind)
- Deuteranopia (green-blind)  
- Tritanopia (blue-blind)
- Achromatopsia (total color blindness)

Use existing libraries or matrix transforms on RGB values.

## State Management

Keep state management simple with useState for MVP. If state becomes complex, use Zustand. Avoid over-engineering with Redux.

## Build Commands

```bash
npm install          # Install dependencies
npm run dev          # Start dev server (Vite)
npm run build        # Production build
npm run preview      # Preview production build
npm run lint         # Run ESLint
```

Always run `npm install` before building. Always test production build with `npm run preview` before deployment.

## Testing Priorities

Always test these scenarios:
- Color generation produces valid 6-digit hex codes
- Locked colors persist through regenerations
- Keyboard shortcuts work correctly
- Image extraction handles CORS and large files
- Export formats produce valid syntax
- Color blindness simulation applies correctly

## Progressive Feature Implementation

Build features in this order:
1. Core generator with spacebar and lock system
2. Image extraction and global adjustment sliders
3. Gradient view and accessibility features
4. User accounts and save system
5. Advanced features (Pantone integration, etc.)

Always prioritize keyboard navigation. Users should rarely need the mouse for core functionality.
